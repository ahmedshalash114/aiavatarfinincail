<div class="kyc-container">
  <div class="interaction-section">
    <div class="dashboard-container" [class.typing]="isTyping">
      <div class="dashboard" [class]="avatarAnimation">
        <!-- Main Circle -->
        <div class="main-circle">
          <div class="pulse-ring"></div>
          <div class="inner-circle">
            <div class="icon-container">
              <fa-icon [icon]="getCurrentIcon()" class="dashboard-icon"></fa-icon>
            </div>
          </div>
        </div>

        <!-- Orbiting Elements -->
        <div class="orbit-container">
          <div class="orbit" *ngFor="let orbit of orbits; let i = index" [style.animation-delay]="orbit.delay">
            <div class="orbit-element" [class]="orbit.class">
              <span class="element-icon">{{ orbit.icon }}</span>
              <div class="element-tooltip">{{ orbit.tooltip }}</div>
            </div>
          </div>
        </div>

        <!-- Progress Rings -->
        <div class="progress-rings">
          <div class="ring" *ngFor="let ring of progressRings" [style.--progress]="ring.progress">
            <svg viewBox="0 0 100 100">
              <circle class="ring-bg" cx="50" cy="50" r="45"/>
              <circle class="ring-progress" cx="50" cy="50" r="45"/>
            </svg>
          </div>
        </div>

        <!-- Message Display -->
        <div class="message-display" [class.typing]="isTyping">
          {{ avatarMessage }}
        </div>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="progress-bar">
      <div class="progress" [style.width.%]="(currentStep / totalSteps) * 100"></div>
    </div>

    <form [formGroup]="kycForm" (ngSubmit)="onSubmit()">
      <!-- Step 1: Gender Selection -->
      <div class="form-step" *ngIf="currentStep === 1">
        <h2>Select Your Avatar</h2>
        <div class="form-group">
          <label>
            <input type="radio" formControlName="gender" value="male" /> Male
          </label>
          <label>
            <input type="radio" formControlName="gender" value="female" /> Female
          </label>
        </div>
      </div>

      <!-- Step 2: Personal Information -->
      <div class="form-step" *ngIf="currentStep === 2" formGroupName="personalInfo">
        <h2>Personal Information</h2>
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input type="text" id="fullName" formControlName="fullName" placeholder="Enter your full name">
        </div>
        <div class="form-group">
          <label for="age">Age</label>
          <input type="number" id="age" formControlName="age" placeholder="Enter your age">
        </div>
        <div class="form-group">
          <label for="occupation">Occupation if freelancer mention your profession </label>
          <input type="text" id="occupation" formControlName="occupation" placeholder="Enter your occupation">
        </div>
      </div>

      <!-- Step 3: Financial Information -->
      <div class="form-step" *ngIf="currentStep === 3" formGroupName="financialInfo">
        <h2>Financial Information</h2>
        <div class="form-group slider-group">
          <label for="annualIncome">Annual Income (EGP)</label>
          <div class="slider-container">
            <input 
              type="range" 
              id="annualIncome" 
              formControlName="annualIncome" 
              min="1" 
              max="500000" 
              step="1000"
              class="custom-slider"
            >
            <div class="slider-value">
              <span class="value">{{ kycForm.get('financialInfo.annualIncome')?.value | number:'1.0-0' }}</span>
              <span class="currency">EGP</span>
            </div>
            <div class="slider-labels">
              <span>1 EGP</span>
              <span>500K EGP</span>
            </div>
          </div>
        </div>
        <div class="form-group slider-group">
          <label for="savings">Current Savings (EGP)</label>
          <div class="slider-container">
            <input 
              type="range" 
              id="savings" 
              formControlName="savings" 
              min="1" 
              max="500000" 
              step="1000"
              class="custom-slider"
            >
            <div class="slider-value">
              <span class="value">{{ kycForm.get('financialInfo.savings')?.value | number:'1.0-0' }}</span>
              <span class="currency">EGP</span>
            </div>
            <div class="slider-labels">
              <span>1 EGP</span>
              <span>500K EGP</span>
            </div>
          </div>
        </div>
        <div class="form-group slider-group">
          <label for="investments">Current Investments (EGP)</label>
          <div class="slider-container">
            <input 
              type="range" 
              id="investments" 
              formControlName="investments" 
              min="1" 
              max="500000" 
              step="1000"
              class="custom-slider"
            >
            <div class="slider-value">
              <span class="value">{{ kycForm.get('financialInfo.investments')?.value | number:'1.0-0' }}</span>
              <span class="currency">EGP</span>
            </div>
            <div class="slider-labels">
              <span>1 EGP</span>
              <span>500K EGP</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 4: Financial Goals -->
      <div class="form-step" *ngIf="currentStep === 4" formGroupName="goals">
        <h2>Financial Goals</h2>
        <div class="form-group slider-group">
          <label for="shortTermGoal">Short-term Goal Amount (EGP)</label>
          <div class="slider-container">
            <input 
              type="range" 
              id="shortTermGoal" 
              formControlName="shortTermGoal" 
              min="1" 
              max="500000" 
              step="1000"
              class="custom-slider"
            >
            <div class="slider-value">
              <span class="value">{{ kycForm.get('goals.shortTermGoal')?.value | number:'1.0-0' }}</span>
              <span class="currency">EGP</span>
            </div>
            <div class="slider-labels">
              <span>1 EGP</span>
              <span>500K EGP</span>
            </div>
          </div>
        </div>
        <div class="form-group slider-group">
          <label for="longTermGoal">Long-term Goal Amount (EGP)</label>
          <div class="slider-container">
            <input 
              type="range" 
              id="longTermGoal" 
              formControlName="longTermGoal" 
              min="1" 
              max="500000" 
              step="1000"
              class="custom-slider"
            >
            <div class="slider-value">
              <span class="value">{{ kycForm.get('goals.longTermGoal')?.value | number:'1.0-0' }}</span>
              <span class="currency">EGP</span>
            </div>
            <div class="slider-labels">
              <span>1 EGP</span>
              <span>500K EGP</span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="riskTolerance">Risk Tolerance</label>
          <select id="riskTolerance" formControlName="riskTolerance">
            <option value="">Select your risk tolerance</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>
      </div>

      <!-- Step 5: Investment Preferences -->
      <div class="form-step" *ngIf="currentStep === 5" formGroupName="preferences">
        <h2>Investment Preferences</h2>
        <div class="form-group">
          <label for="investmentStyle">Investment Style</label>
          <select id="investmentStyle" formControlName="investmentStyle">
            <option value="">Select your investment style</option>
            <option value="conservative">Conservative</option>
            <option value="moderate">Moderate</option>
            <option value="aggressive">Aggressive</option>
          </select>
        </div>
        <div class="form-group">
          <label for="preferredContact">Preferred Contact Method</label>
          <select id="preferredContact" formControlName="preferredContact">
            <option value="">Select your preferred contact method</option>
            <option value="email">Email</option>
            <option value="phone">Phone</option>
            <option value="sms">SMS</option>
          </select>
        </div>
      </div>

      <div class="form-navigation">
        <button type="button" class="btn-secondary" *ngIf="currentStep > 1" (click)="previousStep()">Previous</button>
        <button type="button" class="btn-primary" *ngIf="currentStep < totalSteps" (click)="nextStep()">Next</button>
        <button type="submit" class="btn-success" *ngIf="currentStep === totalSteps">Submit</button>
      </div>
    </form>
  </div>
</div> 